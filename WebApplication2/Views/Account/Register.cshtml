@model RegisterVm

<style>
  /* 에러 자리 고정 (플로팅 아래에 별도 슬롯) */
  .field-error {
    min-height: 18px;           /* 한 줄 높이 확보 */
    margin-top: 6px;
    font-size: 12px;
    color: #dc3545;              /* Bootstrap danger */
  }
  .field-error:empty::before { content: "\00a0"; } /* 비어도 높이 유지 */
</style>

<div class="card shadow-sm mx-auto" style="max-width:420px;">
  <div class="card-body p-4">
    <h3 class="mb-4 text-center">회원가입</h3>

    <form method="post" asp-controller="Account" asp-action="Register" novalidate>
      @Html.AntiForgeryToken()

      <div asp-validation-summary="ModelOnly" class="field-error"></div>

      <!-- 이메일: form-floating은 그대로 유지 -->
      <div class="form-floating">
        <input asp-for="Email"  class="form-control" id="emailInput" placeholder="you@example.com" autocomplete="username" />
        <label for="emailInput">이메일</label>
        <button type="button" name="command" value="CheckEmail"
                class="btn btn-sm btn-outline-secondary position-absolute top-50 end-0 translate-middle-y me-2"
                >중복확인</button>
      </div>
      <!-- ✅ 플로팅 밖, 아래에 고정 높이 에러 슬롯 -->
      <span class="field-error" asp-validation-for="Email"></span>

      <!-- 비밀번호도 동일 패턴 -->
      <div class="form-floating mt-2 position-relative">
        <input asp-for="rawPassword" class="form-control" id="pwdInputRegi" placeholder="비밀번호" autocomplete="current-password" />
        <label for="pwdInput">비밀번호</label>
        <button type="button"
                class="btn btn-sm btn-outline-secondary position-absolute top-50 end-0 translate-middle-y me-2"
                onclick="togglePwd()">보기</button>
      </div>
      <span class="field-error" asp-validation-for="rawPassword"></span>

      <div class="form-floating mt-2 position-relative">
        <input asp-for="Nickname" class="form-control" id="NickNameInput" placeholder="닉네임"  />
        <label for="emailInput">닉네임</label>
        <button type="button" name="command" value="CheckNickName"
                class="btn btn-sm btn-outline-secondary position-absolute top-50 end-0 translate-middle-y me-2">중복확인</button>
      </div>
      <!-- ✅ 플로팅 밖, 아래에 고정 높이 에러 슬롯 -->
      <span class="field-error" asp-validation-for="Nickname"></span>


        <div class="form-floating mt-2 position-relative">
        <input asp-for="Code" class="form-control" id="CodeInput" placeholder="코드"  />
        <label for="emailInput">닉네임</label>
        <button type="button" name="command" value="CodeSend"
                class="btn btn-sm btn-outline-secondary position-absolute top-50 end-0 translate-middle-y me-2">코드전송</button>
      </div>
      <!-- ✅ 플로팅 밖, 아래에 고정 높이 에러 슬롯 -->
      <span class="field-error" asp-validation-for="Nickname"></span>

        <input type="hidden" asp-for="EmailCheck" />
        <input type="hidden" asp-for="nicknameCheck" />
        <input type="hidden" asp-for="CodeCheck" />    

      <button type="submit" class="btn btn-primary w-100 mt-2">회원가입</button>
    </form>
  </div>
</div>

@section Scripts {
  <partial name="_ValidationScriptsPartial" />
  <script>
    function togglePwd(){
      var el = document.getElementById('pwdInputRegi');
      el.type = (el.type === 'password') ? 'text' : 'password';
    }


  </script>
}